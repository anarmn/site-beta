<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="./css/styles.css" type="text/css">
    <link rel="stylesheet" href="./css/portfolio.css" type="text/css">

    <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon" />
    
</head>
<body>
    <header>
        <p class="name">Roman Ana-Maria<p>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="film.html">Film</a></li>
            </ul>
        </nav>
    </header>

    <div class="flex-container">
        <div id="leftRow" class="column">
            <div class="port-item">
                <a href="./venice.html">
                    <img src="./img/portfolio/portofolio-covers/left-1.jpeg">
                    <p class="album-title">Venice</p></a>
            </div>

            <div class="port-item">
                <a href="./bright-side.html">
                    <img src="./img/portfolio/portofolio-covers/left-2.jpeg">
                    <p class="album-title">Bright side</p></a>
            </div>
        </div>

        <div id="rightRow" class="column">
            <div class="port-item">
                <a href="./green-empire.html">
                    <img src="./img/portfolio/portofolio-covers/right-1.JPG">
                    <p class="album-title">Green empire</p></a>
            </div>
        
            <div class="port-item">
                <a href="./surprise.html">
                    <img src="./img/portfolio/portofolio-covers/right-2.jpeg">
                    <p class="album-title">Surprise</p></a>
            </div>
        </div>
    </div>
    <script>
        let nextImageIndexLeft = 3;
        let nextImageIndexRight = 3;
        const maxIndexLeft = 23;
        const maxIndexRight = 21;

        function checkIfImageExists(src, successCallback) {
            const img = new Image();
            img.onload = successCallback;
            img.src = src;
        };

        const parseTitleToHref = title => {
            return title ? `./${title.replace(' ', '-').toLowerCase()}.html` : '';
        };

        const titleLeftArray = ["Venice", "Bright side", "Street details", "Rural", "Evening activities", "Cluj", "Dacia", "Cotroceni", "Granny", "New member", "Mariage story", "Bicaz", "Last day", "Grocery list", "Greens", "Nature", "Yellow", "Sea", "Azuga", "Urban", "Raluca", "Late winter"];
        const titleRightArray = ["Green empire", "Surprise", "Autumn sun", "Train to nowhere", "Alice in mushroomland", "Nightlite", "Selfportraits", "Baby", "Bothanical garden", "West views", "Picnic", "Sunday surprise", "Unknown apartement visit", "November sun", "Dad", "Lonely habbits", "Aniversary affair", "Busteni", "Snow in march", "February sea"]

        function loadMoreImages() {
            const leftGalleryRow = document.getElementById("leftRow");
            const rightGalleryRow = document.getElementById("rightRow");

            if (nextImageIndexLeft + 1 <= maxIndexLeft) {
                const leftImageDiv = document.createElement("div");
                leftImageDiv.className = "port-item";
                const anchorElement = document.createElement("a");
                anchorElement.setAttribute('href', parseTitleToHref(titleLeftArray[nextImageIndexLeft - 1]));

                const leftNewImage = document.createElement("img");
                leftNewImage.src = "img/portfolio/portofolio-covers/left-" + nextImageIndexLeft + ".jpeg";
    
                const pWithTitleForLeft = document.createElement("p");
                pWithTitleForLeft.id = "left-" + (nextImageIndexLeft + 1);
                pWithTitleForLeft.className = "album-title";
                pWithTitleForLeft.innerHTML = titleLeftArray[nextImageIndexLeft - 1]

                anchorElement.appendChild(leftNewImage);
                anchorElement.appendChild(pWithTitleForLeft);
                leftImageDiv.appendChild(anchorElement);
                leftGalleryRow.appendChild(leftImageDiv);
                nextImageIndexLeft++;
            }

            if (nextImageIndexRight + 1 <= maxIndexRight) {
                const rightImageDiv = document.createElement("div");
                rightImageDiv.className = "port-item";
                const anchorElement = document.createElement("a");
                anchorElement.setAttribute('href', parseTitleToHref(titleRightArray[nextImageIndexRight - 1]));

                const rightNewImage = document.createElement("img");
                rightNewImage.src = "img/portfolio/portofolio-covers/right-" + nextImageIndexRight + ".jpeg";
    
                const pWithTitleForRight = document.createElement("p");
                pWithTitleForRight.id = "right-" + (nextImageIndexRight + 1);
                pWithTitleForRight.className = "album-title";
                pWithTitleForRight.innerHTML = titleRightArray[nextImageIndexRight - 1]

                anchorElement.appendChild(rightNewImage);
                anchorElement.appendChild(pWithTitleForRight);
                rightImageDiv.appendChild(anchorElement);
                rightGalleryRow.appendChild(rightImageDiv);
                nextImageIndexRight++;
            }
        }

        window.addEventListener("scrollend", function() {
            if (isScrolledToBottom() && ((nextImageIndexRight + 1 <= maxIndexRight) || (nextImageIndexLeft + 1 <= maxIndexLeft))) {
                loadMoreImages();
            }
        });

        function isScrolledToBottom() {
            // Calculate the current scroll position
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            // Calculate the total height of the document
            const documentHeight = document.documentElement.scrollHeight;
            // Calculate the height of the viewport
            const windowHeight = window.innerHeight;
            // Calculate how far the user has scrolled from the top
            const scrollPosition = scrollTop + windowHeight;
            // Check if the user has scrolled to the bottom of the page
            return scrollPosition >= documentHeight - 400;
        }

    </script>
</body>
  